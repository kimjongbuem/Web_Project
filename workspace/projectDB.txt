CREATE TABLE TB_USERINFO (
	USERCODE INT PRIMARY KEY,
	USERID VARCHAR(20) NOT NULL UNIQUE,
	USERPW VARCHAR(20) NOT NULL,
	USERNAME VARCHAR(30) NOT NULL,
	USERPHONE NUMBER(11) DEFAULT 0,
	USEREMAIL VARCHAR(30)
);


CREATE TABLE TB_BOARD(
	BRDCODE INT PRIMARY KEY,
	BRDUSERCODE INT NOT NULL,
	BRDTITLE VARCHAR2(50) DEFAULT '제목없음',
	BRDWRITER VARCHAR(30) NOT NULL,
	BRDCONTENT VARCHAR2(300),
	BRDDATE DATE DEFAULT SYSDATE,
	BRDVISITED INT DEFAULT 0,
	BRDLIKE INT DEFAULT 0,
	BRDDISLIKE INT DEFAULT 0,
	CONSTRAINT BRDUSER_FK FOREIGN KEY(BRDUSERCODE) REFERENCES TB_USERINFO(USERCODE) ON DELETE CASCADE
);

CREATE TABLE TB_COMMENT(
	CMTCODE INT PRIMARY KEY,
	CMTBRDCODE INT NOT NULL,
	CMTUSERCODE INT NOT NULL,
	CMTWRITER VARCHAR2(30) NOT NULL,
	CMTCONTENT VARCHAR2(150) NOT NULL,
	CONSTRAINT CMTUSER_FK FOREIGN KEY(CMTUSERCODE) REFERENCES TB_USERINFO(USERCODE) ON DELETE CASCADE,
	CONSTRAINT CMTBRD_FK FOREIGN KEY (CMTBRDCODE) REFERENCES TB_BOARD(BRDCODE) ON DELETE CASCADE
);

CREATE TABLE TB_COIN(
	COINNAME VARCHAR(20) NOT NULL,
	COINPRICEKOR INT NOT NULL,
	COINPRICEENG INT NOT NULL,
	COINRATE INT,
	COINRATEPCT INT,
	COINPREMIUM INT,
	COINDEAL INT
);

CREATE SEQUENCE USERSEQ
	START WITH 1
	INCREMENT BY 1
;


CREATE SEQUENCE BRDSEQ
	START WITH 1
	INCREMENT BY 1
;

CREATE SEQUENCE CMTSEQ
	START WITH 1
	INCREMENT BY 1
;

/*
 * 편의를 위해 DROP과 SELECT는 아래 적어두었습니다. 편하게 사용하세요 ^^.
 * DROP 테이블은 사용시엔 주석 풀고 사용해주시면 됩니다.
 */


DROP TABLE TB_USERINFO;
DROP TABLE TB_BOARD;
DROP TABLE TB_COMMENT;
DROP TABLE TB_COIN;
DROP SEQUENCE USERSEQ;
DROP SEQUENCE BRDSEQ;
DROP SEQUENCE CMTSEQ;

ALTER TABLE TB_USERINFO MODIFY(USERCODE INT); 


SELECT * FROM TB_USERINFO;
SELECT * FROM TB_BOARD;
SELECT * FROM TB_COMMENT;
SELECT * FROM TB_COIN;
SELECT USERSEQ.CURRVAL FROM DUAL;
SELECT BRDSEQ.CURRVAL FROM DUAL;
SELECT CMTSEQ.CURRVAL FROM DUAL;

--DELETE TB_USERINFO WHERE USERCODE = 1;
--DELETE TB_BOARD WHERE BRDCODE = 1;
--DELETE TB_COMMENT WHERE CMTCODE = 1;
--DELETE TB_COIN WHERE COINNAME= 'COINTESTNAME';

/* 테스팅용 INSERT 구문입니다. */
INSERT INTO TB_USERINFO VALUES(USERSEQ.NEXTVAL, 'USER TEST ID', 'USER TEST PW', 'USER TEST NAME', 01012345678, 'USER TEST EAMIL @ TEST.COM');
INSERT INTO TB_BOARD VALUES(BRDSEQ.NEXTVAL, 1, 'TEST TITLE', 'TEST WRITER', 'TEST CONTENT', SYSDATE, 0, 0, 0);
INSERT INTO TB_COMMENT VALUES(CMTSEQ.NEXTVAL, 1, 1, 'COMMENT TEST WRITER', 'COMMENT TEST CONTENT');
INSERT INTO TB_COIN VALUES('COINTESTNAME',0,0,0,0,0,0);